import { useState } from 'react';
import { motion } from 'framer-motion';
import type { GradientDirection } from '../types/gradient.types';
import GradientPreview from '../components/GradientPreview';
import ColorPicker from '../components/ColorPicker';
import DirectionSelector from '../components/DirectionSelector';
import CodeOutput from '../components/CodeOutput';

const BG_SVG = `url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns:svgjs='http://svgjs.dev/svgjs' width='1440' height='560' preserveAspectRatio='none' viewBox='0 0 1440 560'%3e%3cg mask='url(%26quot%3b%23SvgjsMask1000%26quot%3b)' fill='none'%3e%3crect width='1440' height='560' x='0' y='0' fill='%230e2a47'%3e%3c/rect%3e%3cpath d='M41.9 404.1L106.85 441.6L106.85 516.6L41.9 554.1L-23.05 516.6L-23.05 441.6zM236.76 291.6L301.71 329.1L301.71 404.1L236.76 441.6L171.81 404.1L171.81 329.1zM171.81 404.1L236.76 441.6L236.76 516.6L171.81 554.1L106.85 516.6L106.85 441.6zM236.76 516.6L301.71 554.1L301.71 629.1L236.76 666.6L171.81 629.1L171.81 554.1zM496.58 66.6L561.53 104.1L561.53 179.1L496.58 216.6L431.62 179.1L431.62 104.1zM496.58 291.6L561.53 329.1L561.53 404.1L496.58 441.6L431.62 404.1L431.62 329.1zM626.48 291.6L691.44 329.1L691.44 404.1L626.48 441.6L561.53 404.1L561.53 329.1zM561.53 404.1L626.48 441.6L626.48 516.6L561.53 554.1L496.58 516.6L496.58 441.6zM691.44 179.1L756.39 216.6L756.39 291.6L691.44 329.1L626.48 291.6L626.48 216.6zM756.39 291.6L821.35 329.1L821.35 404.1L756.39 441.6L691.44 404.1L691.44 329.1zM821.34 404.1L886.3 441.6L886.3 516.6L821.34 554.1L756.39 516.6L756.39 441.6zM951.25 179.1L1016.21 216.6L1016.21 291.6L951.25 329.1L886.3 291.6L886.3 216.6zM951.25 404.1L1016.21 441.6L1016.21 516.6L951.25 554.1L886.3 516.6L886.3 441.6zM1081.16 179.1L1146.11 216.6L1146.11 291.6L1081.16 329.1L1016.21 291.6L1016.21 216.6zM1146.11 291.6L1211.07 329.1L1211.07 404.1L1146.11 441.6L1081.16 404.1L1081.16 329.1zM1211.07 -45.9L1276.02 -8.4L1276.02 66.6L1211.07 104.1L1146.11 66.6L1146.11 -8.4zM1211.07 404.1L1276.02 441.6L1276.02 516.6L1211.07 554.1L1146.11 516.6L1146.11 441.6zM1340.98 179.1L1405.93 216.6L1405.93 291.6L1340.98 329.1L1276.02 291.6L1276.02 216.6zM1340.98 404.1L1405.93 441.6L1405.93 516.6L1340.98 554.1L1276.02 516.6L1276.02 441.6zM1470.88 179.1L1535.84 216.6L1535.84 291.6L1470.88 329.1L1405.93 291.6L1405.93 216.6zM1535.84 291.6L1600.79 329.1L1600.79 404.1L1535.84 441.6L1470.88 404.1L1470.88 329.1zM1470.88 404.1L1535.84 441.6L1535.84 516.6L1470.88 554.1L1405.93 516.6L1405.93 441.6z' stroke='%2303305d' stroke-width='2'%3e%3c/path%3e%3cpath d='M34.4 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM99.35 441.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM99.35 516.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM34.4 554.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM-30.55 516.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM-30.55 441.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM229.26 291.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM294.21 329.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM294.21 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM229.26 441.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM164.31 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM164.31 329.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM229.26 516.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM164.31 554.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM294.21 554.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM294.21 629.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM229.26 666.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM164.31 629.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM489.08 66.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM554.03 104.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM554.03 179.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM489.08 216.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM424.12 179.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM424.12 104.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM489.08 291.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM554.03 329.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM554.03 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM489.08 441.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM424.12 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM424.12 329.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM618.98 291.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM683.94 329.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM683.94 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM618.98 441.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM618.98 516.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM554.03 554.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM489.08 516.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM683.94 179.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM748.89 216.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM748.89 291.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM618.98 216.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM813.85 329.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM813.85 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM748.89 441.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM813.84 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM878.8 441.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM878.8 516.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM813.84 554.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM748.89 516.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM943.75 179.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1008.71 216.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1008.71 291.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM943.75 329.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM878.8 291.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM878.8 216.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM943.75 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1008.71 441.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1008.71 516.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM943.75 554.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1073.66 179.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1138.61 216.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1138.61 291.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1073.66 329.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1203.57 329.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1203.57 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1138.61 441.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1073.66 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1203.57 -45.9 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1268.52 -8.4 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1268.52 66.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1203.57 104.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1138.61 66.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1138.61 -8.4 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1268.52 441.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1268.52 516.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1203.57 554.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1138.61 516.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1333.48 179.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1398.43 216.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1398.43 291.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1333.48 329.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1268.52 291.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1268.52 216.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1333.48 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1398.43 441.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1398.43 516.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1333.48 554.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1463.38 179.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1528.34 216.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1528.34 291.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1463.38 329.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1593.29 329.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1593.29 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1528.34 441.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1463.38 404.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1528.34 516.6 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0zM1463.38 554.1 a7.5 7.5 0 1 0 15 0 a7.5 7.5 0 1 0 -15 0z' fill='%2303305d'%3e%3c/path%3e%3cpath d='M8.26 290.01L51.56 315.01L51.56 365.01L8.26 390.01L-35.04 365.01L-35.04 315.01zM51.56 365.01L94.87 390.01L94.87 440.01L51.56 465.01L8.26 440.01L8.26 390.01zM51.56 515.01L94.87 540.01L94.87 590.01L51.56 615.01L8.26 590.01L8.26 540.01zM138.17 365.01L181.47 390.01L181.47 440.01L138.17 465.01L94.87 440.01L94.87 390.01zM657.8 365.01L701.1 390.01L701.1 440.01L657.8 465.01L614.5 440.01L614.5 390.01zM744.4 65.01L787.71 90.01L787.71 140.01L744.4 165.01L701.1 140.01L701.1 90.01zM787.71 440.01L831.01 465.01L831.01 515.01L787.71 540.01L744.4 515.01L744.4 465.01zM874.31 290.01L917.61 315.01L917.61 365.01L874.31 390.01L831.01 365.01L831.01 315.01zM874.31 440.01L917.61 465.01L917.61 515.01L874.31 540.01L831.01 515.01L831.01 465.01zM917.61 515.01L960.92 540.01L960.92 590.01L917.61 615.01L874.31 590.01L874.31 540.01zM960.92 -9.99L1004.22 15.01L1004.22 65.01L960.92 90.01L917.61 65.01L917.61 15.01zM1004.22 215.01L1047.52 240.01L1047.52 290.01L1004.22 315.01L960.92 290.01L960.92 240.01zM1090.82 215.01L1134.13 240.01L1134.13 290.01L1090.82 315.01L1047.52 290.01L1047.52 240.01zM1177.43 65.01L1220.73 90.01L1220.73 140.01L1177.43 165.01L1134.13 140.01L1134.13 90.01zM1134.13 140.01L1177.43 165.01L1177.43 215.01L1134.13 240.01L1090.82 215.01L1090.82 165.01zM1134.13 290.01L1177.43 315.01L1177.43 365.01L1134.13 390.01L1090.82 365.01L1090.82 315.01zM1177.43 365.01L1220.73 390.01L1220.73 440.01L1177.43 465.01L1134.13 440.01L1134.13 390.01zM1220.73 -9.99L1264.03 15.01L1264.03 65.01L1220.73 90.01L1177.43 65.01L1177.43 15.01zM1393.94 140.01L1437.24 165.01L1437.24 215.01L1393.94 240.01L1350.64 215.01L1350.64 165.01z' stroke='rgba(6%2c 80%2c 156%2c 0.93)' stroke-width='2'%3e%3c/path%3e%3c/g%3e%3cdefs%3e%3cmask id='SvgjsMask1000'%3e%3crect width='1440' height='560' fill='white'%3e%3c/rect%3e%3c/mask%3e%3c/defs%3e%3c/svg%3e")`;

function Home() {
  const [color1, setColor1] = useState('#667eea');
  const [color2, setColor2] = useState('#764ba2');
  const [direction, setDirection] = useState<GradientDirection>('to right');

  // Generate CSS code
  const cssValue = `linear-gradient(${direction}, ${color1}, ${color2})`;
  const cssCode = `background: ${cssValue};`;

  // Random gradient
  const randomColor = () =>
    '#' + Math.floor(Math.random() * 16777215).toString(16).padStart(6, '0');

  const handleRandom = () => {
    setColor1(randomColor());
    setColor2(randomColor());
  };

  // Swap colors
  const handleSwap = () => {
    setColor1(color2);
    setColor2(color1);
  };

  return (
    <div
      className="min-h-screen bg-[#0e2a47] bg-cover bg-center bg-fixed px-4 py-12 font-sans md:py-20"
      style={{ backgroundImage: BG_SVG }}
    >
      {/* Main container */}
      <motion.div
        initial={{ opacity: 0, y: 24 }}
        animate={{ opacity: 1, y: 0 }}
        transition={{ duration: 0.5, ease: 'easeOut' }}
        className="mx-auto w-full max-w-2xl space-y-8"
      >
        {/* Header */}
        <div className="text-center">
          <h1 className="text-2xl font-bold text-white md:text-3xl">
            CSS Gradient Generator
          </h1>
          <p className="mt-2 text-sm text-sky-200/60">
            Pilih warna, arah gradasi, dan salin kode CSS-nya.
          </p>
        </div>

        {/* Card â€” dark glassmorphism */}
        <div className="rounded-xl border border-white/10 bg-white/5 p-6 shadow-2xl backdrop-blur-xl md:p-8 space-y-8">
          {/* Preview */}
          <GradientPreview cssValue={cssValue} />

          {/* Color pickers row */}
          <div className="grid grid-cols-1 gap-4 sm:grid-cols-2">
            <ColorPicker label="Color 1" color={color1} onChange={setColor1} />
            <ColorPicker label="Color 2" color={color2} onChange={setColor2} />
          </div>

          {/* Action buttons */}
          <div className="flex flex-wrap gap-3">
            <motion.button
              type="button"
              onClick={handleSwap}
              whileHover={{ scale: 1.03 }}
              whileTap={{ scale: 0.95 }}
              className="flex cursor-pointer items-center gap-2 rounded-lg border border-white/15 bg-white/5 px-4 py-2.5 text-sm font-medium text-sky-200 transition-colors hover:bg-white/10"
            >
              â‡„ Swap Colors
            </motion.button>
            <motion.button
              type="button"
              onClick={handleRandom}
              whileHover={{ scale: 1.03 }}
              whileTap={{ scale: 0.95 }}
              className="flex cursor-pointer items-center gap-2 rounded-lg border border-white/15 bg-white/5 px-4 py-2.5 text-sm font-medium text-sky-200 transition-colors hover:bg-white/10"
            >
              ðŸŽ² Random
            </motion.button>
          </div>

          {/* Direction selector */}
          <DirectionSelector direction={direction} onChange={setDirection} />

          {/* Code output */}
          <CodeOutput cssCode={cssCode} />
        </div>

        {/* Footer */}
        <p className="text-center text-xs text-sky-300/30">
          Built with React + TypeScript + Tailwind CSS
        </p>
      </motion.div>
    </div>
  );
}

export default Home;
